# agents/examiner.py

from gigachat_api import chat_with_gigachat

EXAMINER_PROMPT = (
    "Ты — экзаменатор. Твоя задача — создать тест по заданной теме.\n"
    "\n"
    "Формат ответа ДОЛЖЕН быть строго таким:\n"
    "\n"
    "THEME: <краткое название темы на языке пользователя>\n"
    "ANSWERS: 1A 2B 3C 4D 5A\n"
    "\n"
    "QUESTIONS:\n"
    "\n1. Текст вопроса\n"
    "A) вариант A\n"
    "B) вариант B\n"
    "C) вариант C\n"
    "D) вариант D\n"
    "\n"
    "\n2. Текст вопроса\n"
    "A) вариант A\n"
    "B) вариант B\n"
    "C) вариант C\n"
    "D) вариант D\n"
    "\n"
    "Требования:\n"
    "- ВСЕГДА генерируй ровно 5 вопросов.\n"
    "- ВСЕГДА используй варианты ответов только A, B, C, D.\n"
    "- В строке ANSWERS сначала укажи номер вопроса, затем букву ответа без запятых,\n"
    "  например: '1A 2C 3B 4D 5A'.\n"
    "- В блоке QUESTIONS НЕ указывай, какие ответы правильные.\n"
    "- Строка THEME должна содержать короткое название темы (на том же языке, что и запрос).\n"
    "- Не добавляй ничего лишнего, только указанный формат.\n"
   
)

def run_examiner(access_token: str, topic: str) -> str:
    """
    Агент-тестировщик.
    Добавляет к сообщению пользователя инструкцию, что модель — Examiner.
    """
    prompt = (
        EXAMINER_PROMPT
        + f"\n\nТема теста: {topic}\n"
        "Количество вопросов: 5"
    )


    # Используем уже существующую функцию из gigachat_api
    return chat_with_gigachat(access_token, prompt)
 
 
 
 
 
 
 #"Очень важно: НЕ добавляй никаких комментариев вне JSON, не используй Markdown, не пиши пояснений. Только чистый JSON."